(function(){"use strict";var t={5315:function(t,e,r){var a=r(9242),o=r(3396);const s={class:"header"},l={class:"header__wrapper container"},i=(0,o._)("span",{class:"header__info"},"Каталог",-1),c=(0,o._)("img",{alt:"Логотип интернет магазина Технозавррр",height:"33",src:"/img/svg/logo-tech.svg",width:"190"},null,-1),n=(0,o._)("a",{class:"header__tel",href:"tel:8 800 600 90 09"}," 8 800 600 90 09 ",-1),u=(0,o.uE)('<footer class="footer"><div class="footer__wrapper container"><ul class="footer__links"><li><a class="footer__link" href="#"> Каталог </a></li><li><a class="footer__link" href="tel:88006009009"> 8 800 600 90 09 </a></li><li><a class="footer__link" href="mailto:hi@technozavrrr.com"> hi@technozavrrr.com </a></li><li><a class="footer__link" href="#"> Распродажа </a></li><li><a class="footer__link footer__link--medium" href="#"> Заказать звонок </a></li></ul><ul class="footer__social social"><li class="social__item"><a aria-label="Вконтакте" class="social__link" href="#"><svg fill="currentColor" height="11" width="20"><use xlink:href="#icon-vk"></use></svg></a></li><li class="social__item"><a aria-label="Инстаграм" class="social__link" href="#"><svg fill="currentColor" height="17" width="17"><use xlink:href="#icon-insta"></use></svg></a></li><li class="social__item"><a aria-label="Facebook" class="social__link" href="#"><svg fill="currentColor" height="17" width="17"><use xlink:href="#icon-facebook"></use></svg></a></li><li class="social__item"><a aria-label="Twitter" class="social__link" href="#"><svg fill="currentColor" height="14" width="17"><use xlink:href="#icon-twitter"></use></svg></a></li><li class="social__item"><a aria-label="Telegram" class="social__link" href="#"><svg fill="currentColor" height="17" width="19"><use xlink:href="#icon-telegram"></use></svg></a></li></ul><p class="footer__desc"> Все права на материалы, находящиеся на сайте, охраняются в соответствии с законодательством РФ, в том числе об авторском праве и смежных правах. </p><ul class="footer__data"><li><a class="footer__link" href="#" rel="noopener" target="_blank" type="application/pdf"> Политика конфиденциальности </a></li><li><a class="footer__link" href="#" rel="noopener" target="_blank" type="application/pdf"> Публичная оферта </a></li></ul><span class="footer__copyright"> © 2020 Технозавррр </span></div></footer>',1);function d(t,e,r,a,d,_){const p=(0,o.up)("router-link"),m=(0,o.up)("CartIndicator"),h=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("header",s,[(0,o._)("div",l,[i,(0,o.Wm)(p,{to:{name:"main"},class:"header__logo"},{default:(0,o.w5)((()=>[c])),_:1}),n,(0,o.Wm)(m)])]),(0,o.Wm)(h),u])}var _=r(7139);const p=(0,o._)("div",{"aria-label":"Загрузка кол-ва товаров",class:"lds-dual-ring lds-dual-ring-mini"},null,-1),m=(0,o._)("span",{style:{content:"'\\26A0'","font-size":"25px"}},"⚠",-1),h=(0,o._)("svg",{fill:"currentColor",height:"21",width:"30"},[(0,o._)("use",{"xlink:href":"#icon-cart"})],-1),g={"aria-label":"Количество товаров",class:"header__count"};function f(t,e,r,a,s,l){const i=(0,o.up)("router-link");return t.isLoading?((0,o.wg)(),(0,o.j4)(i,{key:0,to:{name:"cart"},class:"header__cart"},{default:(0,o.w5)((()=>[p])),_:1})):t.isLoadingFailed?((0,o.wg)(),(0,o.j4)(i,{key:1,to:{name:"cart"},class:"header__cart"},{default:(0,o.w5)((()=>[m])),_:1})):((0,o.wg)(),(0,o.j4)(i,{key:2,to:{name:"cart"},"aria-label":"Корзина с товарами",class:"header__cart"},{default:(0,o.w5)((()=>[h,(0,o._)("span",g,(0,_.zw)(t.count),1)])),_:1}))}var b=r(65),y=(0,o.aZ)({name:"CartIndicator",computed:{...(0,b.Se)({isLoading:"isCartLoading",isLoadingFailed:"isCartLoadingFailed",count:"cartProductsCount"})}}),C=r(89);const T=(0,C.Z)(y,[["render",f]]);var k,v,D=T;(function(t){t["RESET_CART"]="RESET_CART",t["UPDATE_ORDER_INFO"]="UPDATE_ORDER_INFO",t["UPDATE_CART_PRODUCT_AMOUNT"]="UPDATE_CART_PRODUCT_AMOUNT",t["DELETE_CART_PRODUCT"]="DELETE_CART_PRODUCT",t["UPDATE_USER_ACCESS_KEY"]="UPDATE_USER_ACCESS_KEY",t["UPDATE_CART_PRODUCTS_DATA"]="UPDATE_CART_PRODUCTS_DATA",t["SYNC_CART_PRODUCTS"]="SYNC_CART_PRODUCTS"})(k||(k={})),function(t){t["LOAD_CART"]="LOAD_CART",t["LOAD_ORDER_INFO"]="LOAD_ORDER_INFO",t["ADD_PRODUCT_TO_CART"]="ADD_PRODUCT_TO_CART",t["UPDATE_CART_PRODUCT_AMOUNT"]="UPDATE_CART_PRODUCT_AMOUNT",t["DELETE_CART_PRODUCT_AMOUNT"]="DELETE_CART_PRODUCT_AMOUNT"}(v||(v={}));var P=r(70);const A="https://vue-study.skillbox.cc";var w;(function(t){t["USER_ACCESS_KEY"]="USER_ACCESS_KEY"})(w||(w={}));const U={cartProducts:[],userAccessKey:null,orderInfo:null,cartLoad:!1,cartLoadFailed:!1,cartProductsData:[]},E={[k.UPDATE_ORDER_INFO](t,e){t.orderInfo=e},[k.RESET_CART](t){t.cartProducts.length=0,t.cartProductsData.length=0},[k.UPDATE_CART_PRODUCT_AMOUNT](t,e){const r=t.cartProducts.find((t=>t.productId===e.productId));r&&(r.amount=e.amount)},[k.DELETE_CART_PRODUCT](t,e){t.cartProducts=t.cartProducts.filter((t=>t.productId!==e))},[k.UPDATE_USER_ACCESS_KEY](t,e){t.userAccessKey=e},[k.UPDATE_CART_PRODUCTS_DATA](t,e){t.cartProductsData=e},[k.SYNC_CART_PRODUCTS](t){t.cartProducts=t.cartProductsData.map((t=>({productId:t.product.id,amount:t.quantity})))}},R={[v.LOAD_ORDER_INFO]({commit:t},e){return P.ZP.get(`api/orders/${e}`,{baseURL:A,params:{userAccessKey:U.userAccessKey}}).then((e=>{t(k.UPDATE_ORDER_INFO,e.data)}))},[v.LOAD_CART]({commit:t,state:e}){return e.cartLoad=!0,e.cartLoadFailed=!1,P.ZP.get("api/baskets",{baseURL:A,params:{userAccessKey:e.userAccessKey}}).then((r=>{e.userAccessKey||(localStorage.setItem(w.USER_ACCESS_KEY,r.data.user.accessKey),t(k.UPDATE_USER_ACCESS_KEY,r.data.user.accessKey)),t(k.UPDATE_CART_PRODUCTS_DATA,r.data.items),t(k.SYNC_CART_PRODUCTS)})).catch((()=>{e.cartLoadFailed=!0})).then((()=>{e.cartLoad=!1}))},[v.ADD_PRODUCT_TO_CART]({state:t,commit:e},{productId:r,amount:a}){return P.ZP.post("api/baskets/products",{productId:r,quantity:a},{params:{userAccessKey:t.userAccessKey},baseURL:A}).then((t=>{e(k.UPDATE_CART_PRODUCTS_DATA,t.data.items),e(k.SYNC_CART_PRODUCTS)}))},[v.UPDATE_CART_PRODUCT_AMOUNT]({state:t,commit:e},{productId:r,amount:a}){return e(k.UPDATE_CART_PRODUCT_AMOUNT,{productId:r,amount:a}),a<1?new Promise((t=>t(void 0))):P.ZP.put("api/baskets/products",{productId:r,quantity:a},{params:{userAccessKey:t.userAccessKey},baseURL:A}).then((t=>{e(k.UPDATE_CART_PRODUCTS_DATA,t.data.items)})).catch((()=>e(k.SYNC_CART_PRODUCTS)))},[v.DELETE_CART_PRODUCT_AMOUNT]({state:t,commit:e},r){return e(k.DELETE_CART_PRODUCT,r),P.ZP["delete"]("api/baskets/products",{params:{userAccessKey:t.userAccessKey},data:{productId:r},baseURL:A}).then((t=>{e(k.UPDATE_CART_PRODUCTS_DATA,t.data.items)})).catch((()=>e(k.SYNC_CART_PRODUCTS)))}},O={orderInfo:t=>t.orderInfo,cartDetailProducts:t=>t.cartProductsData,cartTotalPrice(t,e){return e.cartDetailProducts.reduce(((t,e)=>t+(e.product.price||0)*e.quantity),0)},cartTotalCount(t){return t.cartProducts.reduce(((t,e)=>t+e.amount),0)},cartProductsCount(t){return t.cartProducts.length},isCartLoading(t){return t.cartLoad},isCartLoadingFailed(t){return t.cartLoadFailed}},S=(0,b.MT)({state:U,mutations:E,getters:O,actions:R,plugins:[(0,b.hu)()]}),F=()=>S;var L=(0,o.aZ)({setup(){const t=F();return{store:t}},components:{CartIndicator:D},name:"App",created(){const t=localStorage.getItem(w.USER_ACCESS_KEY);t&&this[k.UPDATE_USER_ACCESS_KEY](t),this[v.LOAD_CART]()},methods:{...(0,b.nv)([v.LOAD_CART]),...(0,b.OI)([k.UPDATE_USER_ACCESS_KEY])}});const I=(0,C.Z)(L,[["render",d]]);var Z=I,z=r(2483);const x={class:"content container"},q=(0,o._)("div",{class:"content__top content__top--catalog"},[(0,o._)("h1",{class:"content__title"},"Каталог"),(0,o._)("span",{class:"content__info"}," 152 товара ")],-1),V={class:"content__catalog"},N={class:"catalog"},K={key:0,class:"lds-dual-ring"},M={key:1};function j(t,e,r,s,l,i){const c=(0,o.up)("ProductFilter"),n=(0,o.up)("ProductList"),u=(0,o.up)("BasePagination");return(0,o.wg)(),(0,o.iD)("main",x,[q,(0,o._)("div",V,[(0,o.Wm)(c,{"category-id":t.query.filterCategory,"onUpdate:category-id":e[0]||(e[0]=e=>t.query.filterCategory=e),"color-id":t.query.filterColor,"onUpdate:color-id":e[1]||(e[1]=e=>t.query.filterColor=e),"price-from":t.query.filterPriceFrom,"onUpdate:price-from":e[2]||(e[2]=e=>t.query.filterPriceFrom=e),"price-to":t.query.filterPriceTo,"onUpdate:price-to":e[3]||(e[3]=e=>t.query.filterPriceTo=e)},null,8,["category-id","color-id","price-from","price-to"]),(0,o._)("section",N,[t.productsLoading?((0,o.wg)(),(0,o.iD)("div",K)):t.productsLoadingFailed?((0,o.wg)(),(0,o.iD)("div",M,[(0,o.Uk)(" Ошибка, не удалось загрузить товары "),(0,o._)("button",{onClick:e[4]||(e[4]=(0,a.iM)(((...e)=>t.loadProducts&&t.loadProducts(...e)),["prevent"]))},"Повторить ещё раз")])):((0,o.wg)(),(0,o.j4)(n,{key:2,products:t.products},null,8,["products"])),(0,o.Wm)(u,{page:t.query.page,"onUpdate:page":e[5]||(e[5]=e=>t.query.page=e),count:t.countProducts,"per-page":t.query.productsPerPage},null,8,["page","count","per-page"])])])])}const W={class:"catalog__list"};function B(t,e,r,a,s,l){const i=(0,o.up)("ProductItem");return(0,o.wg)(),(0,o.iD)("ul",W,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.products,(t=>((0,o.wg)(),(0,o.j4)(i,{key:t.id,product:t},null,8,["product"])))),128))])}const Y={key:0,class:"catalog__item"},$=["src"],H={class:"catalog__title"},G={href:"#"},Q={class:"catalog__price"};function X(t,e,r,a,s,l){const i=(0,o.up)("router-link"),c=(0,o.up)("BaseColors");return t.product?((0,o.wg)(),(0,o.iD)("li",Y,[(0,o.Wm)(i,{to:{name:"product",params:{id:t.product.id}},class:"catalog__pic"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:t.product.image.file.url,alt:"product.title"},null,8,$)])),_:1},8,["to"]),(0,o._)("h3",H,[(0,o._)("a",G,(0,_.zw)(t.product.title),1)]),(0,o._)("span",Q,(0,_.zw)(t.price)+" ₽ ",1),(0,o.Wm)(c,{color:t.currentColor,"onUpdate:color":e[0]||(e[0]=e=>t.currentColor=e),colors:t.currColors,class:"colors--black"},null,8,["color","colors"])])):(0,o.kq)("",!0)}const J={class:"colors"},tt={class:"colors__label"},et=["value"];function rt(t,e,r,s,l,i){return(0,o.wg)(),(0,o.iD)("ul",J,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.colors,(r=>((0,o.wg)(),(0,o.iD)("li",{key:r.id,class:"colors__item"},[(0,o._)("label",tt,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.currentColor=e),value:r.id,class:"colors__radio sr-only",type:"radio"},null,8,et),[[a.G2,t.currentColor]]),(0,o._)("span",{style:(0,_.j5)({"background-color":r.code}),class:"colors__value"},null,4)])])))),128))])}var at=(0,o.aZ)({name:"BaseColors",props:{color:Number,colors:Object},watch:{color(t){this.currentColor=t}},computed:{currentColor:{get(){return this.color},set(t){this.$emit("update:color",t)}}}});const ot=(0,C.Z)(at,[["render",rt]]);var st=ot;function lt(t){return(new Intl.NumberFormat).format(t)}var it=(0,o.aZ)({name:"ProductItem",components:{BaseColors:st},data(){return{currentColor:0}},computed:{price(){return lt(this.product?.price||0)},currColors(){return this.product?.colors||[]}},props:{product:{type:Object}}});const ct=(0,C.Z)(it,[["render",X]]);var nt=ct,ut=(0,o.aZ)({name:"ProductList",components:{ProductItem:nt},props:{products:{type:Object}}});const dt=(0,C.Z)(ut,[["render",B]]);var _t=dt;const pt={class:"catalog__pagination pagination"},mt={class:"pagination__item"},ht=(0,o._)("svg",{fill:"currentColor",height:"14",width:"8"},[(0,o._)("use",{"xlink:href":"#icon-arrow-left"})],-1),gt=[ht],ft=["onClick"],bt={class:"pagination__item"},yt=(0,o._)("svg",{fill:"currentColor",height:"14",width:"8"},[(0,o._)("use",{"xlink:href":"#icon-arrow-right"})],-1),Ct=[yt];function Tt(t,e,r,a,s,l){return(0,o.wg)(),(0,o.iD)("ul",pt,[(0,o._)("li",mt,[(0,o._)("a",{class:(0,_.C_)([{"pagination__link--disabled":1===t.page},"pagination__link pagination__link--arrow"]),"aria-label":"Предыдущая страница",onClick:e[0]||(e[0]=e=>t.paginate(t.page-1,t.page>1))},gt,2)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.pages,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e,class:"pagination__item"},[(0,o._)("a",{class:(0,_.C_)([{"pagination__link--current":e===t.page},"pagination__link"]),href:"#",onClick:r=>t.paginate(e,!0)},(0,_.zw)(e),11,ft)])))),128)),(0,o._)("li",bt,[(0,o._)("a",{class:(0,_.C_)([{"pagination__link--disabled":t.page===t.pages},"pagination__link pagination__link--arrow"]),"aria-label":"Следующая страница",href:"#",onClick:e[1]||(e[1]=e=>t.paginate(t.page+1,t.page<t.pages))},Ct,2)])])}var kt=(0,o.aZ)({name:"BasePagination",props:{page:{type:Number,default:1},count:{type:Number,default:1},perPage:{type:Number,default:3}},computed:{pages(){return Math.ceil(this.count/this.perPage)}},methods:{paginate(t,e){e&&this.$emit("update:page",t)}}});const vt=(0,C.Z)(kt,[["render",Tt]]);var Dt=vt;const Pt={class:"filter"},At=(0,o._)("h2",{class:"filter__title"},"Фильтры",-1),wt={class:"form__block"},Ut=(0,o._)("legend",{class:"form__legend"},"Цена",-1),Et={class:"form__label form__label--price"},Rt=(0,o._)("span",{class:"form__value"},"От",-1),Ot={class:"form__label form__label--price"},St=(0,o._)("span",{class:"form__value"},"До",-1),Ft={class:"form__block"},Lt=(0,o._)("legend",{class:"form__legend"},"Категория",-1),It={class:"form__label form__label--select"},Zt=(0,o._)("option",{value:"0"},"Все категории",-1),zt=["selected","value"],xt={class:"form__block"},qt=(0,o._)("legend",{class:"form__legend"},"Цвет",-1),Vt=(0,o.uE)('<fieldset class="form__block"><legend class="form__legend">Объемб в ГБ</legend><ul class="check-list"><li class="check-list__item"><label class="check-list__label"><input checked="" class="check-list__check sr-only" name="volume" type="checkbox" value="8"><span class="check-list__desc"> 8 <span>(313)</span></span></label></li><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" name="volume" type="checkbox" value="16"><span class="check-list__desc"> 16 <span>(461)</span></span></label></li><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" name="volume" type="checkbox" value="32"><span class="check-list__desc"> 32 <span>(313)</span></span></label></li><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" name="volume" type="checkbox" value="64"><span class="check-list__desc"> 64 <span>(313)</span></span></label></li><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" name="volume" type="checkbox" value="128"><span class="check-list__desc"> 128 <span>(313)</span></span></label></li><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" name="volume" type="checkbox" value="264"><span class="check-list__desc"> 264 <span>(313)</span></span></label></li></ul></fieldset><button class="filter__submit button button--primery" type="submit"> Применить </button>',2);function Nt(t,e,r,s,l,i){const c=(0,o.up)("BaseColors");return(0,o.wg)(),(0,o.iD)("aside",Pt,[At,(0,o._)("form",{action:"#",class:"filter__form form",method:"get",onSubmit:e[5]||(e[5]=(0,a.iM)(((...e)=>t.submit&&t.submit(...e)),["prevent"]))},[(0,o._)("fieldset",wt,[Ut,(0,o._)("label",Et,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.currentPriceFrom=e),class:"form__input",name:"min-price",type:"text"},null,512),[[a.nr,t.currentPriceFrom,void 0,{number:!0}]]),Rt]),(0,o._)("label",Ot,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.currentPriceTo=e),class:"form__input",name:"max-price",type:"text"},null,512),[[a.nr,t.currentPriceTo,void 0,{number:!0}]]),St])]),(0,o._)("fieldset",Ft,[Lt,(0,o._)("label",It,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":e[2]||(e[2]=e=>t.currentCategory=e),class:"form__select",name:"category"},[Zt,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.categories,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,selected:t.currentCategory===e.id,value:e.id},(0,_.zw)(e.title),9,zt)))),128))],512),[[a.bM,t.currentCategory]])])]),(0,o._)("fieldset",xt,[qt,(0,o.Wm)(c,{color:t.currentColorId,"onUpdate:color":e[3]||(e[3]=e=>t.currentColorId=e),colors:t.colors},null,8,["color","colors"])]),Vt,(0,o._)("button",{class:"filter__reset button button--second",type:"button",onClick:e[4]||(e[4]=(0,a.iM)(((...e)=>t.reset&&t.reset(...e)),["prevent"]))}," Сбросить ")],32)])}var Kt=(0,o.aZ)({name:"ProductFilter",props:["priceFrom","priceTo","categoryId","colorId"],components:{BaseColors:st},setup(){return{loadCategoriesTimer:0,loadColorsTimer:0}},data(){return{currentPriceFrom:this.priceFrom||0,currentPriceTo:this.priceTo||0,currentCategory:this.categoryId||0,currentColorId:this.colorId||0,colorsData:null,categoriesData:null}},computed:{categories(){return this.categoriesData?this.categoriesData.items:[]},colors(){return this.colorsData?this.colorsData.items:[]}},watch:{priceFrom(t){this.currentPriceFrom=t},priceTo(t){this.currentPriceTo=t},categoryId(t){this.currentCategory=t},colorId(t){this.currentColorId=t}},methods:{loadCategories(){clearTimeout(this.loadCategoriesTimer),this.loadCategoriesTimer=setTimeout((()=>{P.ZP.get("api/productCategories",{baseURL:A}).then((t=>this.categoriesData=t.data))}),0)},loadColors(){clearTimeout(this.loadColorsTimer),this.loadColorsTimer=setTimeout((()=>{P.ZP.get("api/colors",{baseURL:A}).then((t=>this.colorsData=t.data))}),0)},changeValue(t){this.$emit("update:priceFrom",t?0:this.currentPriceFrom),this.$emit("update:priceTo",t?0:this.currentPriceTo),this.$emit("update:categoryId",t?0:this.currentCategory),this.$emit("update:colorId",t?0:this.currentColorId)},submit(){this.changeValue(!1)},reset(){this.changeValue(!0)}},created(){this.loadCategories(),this.loadColors()}});const Mt=(0,C.Z)(Kt,[["render",Nt]]);var jt=Mt,Wt=(0,o.aZ)({setup(){return{loadProductsTimer:0}},name:"MainPage",components:{ProductList:_t,BasePagination:Dt,ProductFilter:jt},props:{pageParams:{type:Object,default:()=>({})}},data(){return{query:{filterPriceFrom:0,filterPriceTo:0,filterCategory:0,filterColor:0,page:1,productsPerPage:3},...this.pageParams,productsLoading:!1,productsLoadingFailed:!1,productsData:null}},methods:{loadProducts(){this.productsLoading=!0,this.productsLoadingFailed=!1,clearTimeout(this.loadProductsTimer),this.loadProductsTimer=setTimeout((()=>{P.ZP.get("api/products",{baseURL:A,params:{page:this.query.page,limit:this.query.productsPerPage,colorId:this.query.filterColor,minPrice:this.query.filterPriceFrom,maxPrice:this.query.filterPriceTo,categoryId:this.query.filterCategory}}).then((t=>this.productsData=t.data)).catch((()=>this.productsLoadingFailed=!0)).then((()=>this.productsLoading=!1))}),0)}},computed:{products(){return this.productsData?this.productsData.items:[]},countProducts(){return this.productsData?this.productsData.pagination.total:0}},watch:{query:{deep:!0,handler:"loadProducts",immediate:!0}}});const Bt=(0,C.Z)(Wt,[["render",j]]);var Yt=Bt;function $t(t,e,r,a,s,l){return(0,o.wg)(),(0,o.iD)("h1",null,"Страница не найдена")}var Ht=(0,o.aZ)({name:"NotFoundPage"});const Gt=(0,C.Z)(Ht,[["render",$t]]);var Qt=Gt;const Xt={key:0,class:"lds-dual-ring"},Jt={key:1},te={key:2,class:"content container"},ee={class:"content__top"},re={class:"breadcrumbs"},ae={class:"breadcrumbs__item"},oe={class:"breadcrumbs__item"},se={class:"breadcrumbs__item"},le={class:"breadcrumbs__link"},ie={class:"item"},ce={class:"item__pics pics"},ne={class:"pics__wrapper"},ue=["alt","src"],de={class:"item__info"},_e={class:"item__code"},pe={class:"item__title"},me={class:"item__form"},he={class:"item__price"},ge={class:"form__block"},fe=(0,o._)("legend",{class:"form__legend"},"Цвет:",-1),be=(0,o.uE)('<fieldset class="form__block"><legend class="form__legend">Объемб в ГБ:</legend><ul class="sizes sizes--primery"><li class="sizes__item"><label class="sizes__label"><input class="sizes__radio sr-only" name="sizes-item" type="radio" value="32"><span class="sizes__value"> 32gb </span></label></li><li class="sizes__item"><label class="sizes__label"><input class="sizes__radio sr-only" name="sizes-item" type="radio" value="64"><span class="sizes__value"> 64gb </span></label></li><li class="sizes__item"><label class="sizes__label"><input checked="" class="sizes__radio sr-only" name="sizes-item" type="radio" value="128"><span class="sizes__value"> 128gb </span></label></li></ul></fieldset>',1),ye={class:"item__row"},Ce={class:"form__counter"},Te=(0,o._)("svg",{fill:"currentColor",height:"12",width:"12"},[(0,o._)("use",{"xlink:href":"#icon-minus"})],-1),ke=[Te],ve=(0,o._)("svg",{fill:"currentColor",height:"12",width:"12"},[(0,o._)("use",{"xlink:href":"#icon-plus"})],-1),De=[ve],Pe=["disabled"],Ae=(0,o.uE)('<div class="item__desc"><ul class="tabs"><li class="tabs__item"><a class="tabs__link tabs__link--current"> Описание </a></li><li class="tabs__item"><a class="tabs__link" href="#"> Характеристики </a></li><li class="tabs__item"><a class="tabs__link" href="#"> Гарантия </a></li><li class="tabs__item"><a class="tabs__link" href="#"> Оплата и доставка </a></li></ul><div class="item__content"><p> Навигация GPS, ГЛОНАСС, BEIDOU Galileo и QZSS<br> Синхронизация со смартфоном<br> Связь по Bluetooth Smart, ANT+ и Wi-Fi<br> Поддержка сторонних приложений<br></p><a href="#"> Все характеристики </a><h3>Что это?</h3><p> Wahoo ELEMNT BOLT GPS – это велокомпьютер, который позволяет оптимизировать свои велотренировки, сделав их максимально эффективными. Wahoo ELEMNT BOLT GPS синхронизируется с датчиками по ANT+, объединяя полученную с них информацию. Данные отображаются на дисплее, а также сохраняются на смартфоне. При этом на мобильное устройство можно установить как фирменное приложение, так и различные приложения сторонних разработчиков. Велокомпьютер точно отслеживает местоположение, принимая сигнал с целого комплекса спутников. Эта информация позволяет смотреть уже преодоленные маршруты и планировать новые велопрогулки. </p><h3>Дизайн</h3><p> Велокомпьютер Wahoo ELEMNT BOLT очень компактный. Размеры устройства составляют всего 74,6 x 47,3 x 22,1 мм. что не превышает габариты смартфона. Корпус гаджета выполнен из черного пластика. На обращенной к пользователю стороне расположен дисплей диагональю 56 мм. На дисплей выводятся координаты и скорость, а также полученная со смартфона и синхронизированных датчиков информация: интенсивность, скорость вращения педалей, пульс и т.д. (датчики не входят в комплект поставки). Корпус велокомпьютера имеет степень защиты от влаги IPX7. Это означает, что устройство не боится пыли, а также выдерживает кратковременное (до 30 минут) погружение в воду на глубину не более 1 метра. </p></div></div>',1);function we(t,e,r,s,l,i){const c=(0,o.up)("router-link"),n=(0,o.up)("BaseColors");return t.productLoading?((0,o.wg)(),(0,o.iD)("div",Xt)):t.productData?((0,o.wg)(),(0,o.iD)("main",te,[(0,o._)("div",ee,[(0,o._)("ul",re,[(0,o._)("li",ae,[(0,o.Wm)(c,{to:{name:"main"},class:"breadcrumbs__link"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Каталог ")])),_:1})]),(0,o._)("li",oe,[(0,o.Wm)(c,{to:{name:"main",query:{categoryId:t.category.id}},class:"breadcrumbs__link"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,_.zw)(t.category.title),1)])),_:1},8,["to"])]),(0,o._)("li",se,[(0,o._)("a",le,(0,_.zw)(t.product.title),1)])])]),(0,o._)("section",ie,[(0,o._)("div",ce,[(0,o._)("div",ne,[(0,o._)("img",{alt:t.product.title,src:t.product.image.file.url,height:"570",width:"570"},null,8,ue)])]),(0,o._)("div",de,[(0,o._)("span",_e,"Артикул: "+(0,_.zw)(t.product.id),1),(0,o._)("h2",pe,(0,_.zw)(t.product.title),1),(0,o._)("div",me,[(0,o._)("form",{action:"#",class:"form",method:"POST",onSubmit:e[5]||(e[5]=(0,a.iM)(((...e)=>t.addToCart&&t.addToCart(...e)),["prevent"]))},[(0,o._)("b",he,(0,_.zw)(t.price)+" ₽ ",1),(0,o._)("fieldset",ge,[fe,(0,o.Wm)(n,{color:t.currentColor,"onUpdate:color":e[1]||(e[1]=e=>t.currentColor=e),colors:t.currColors,class:"colors--black"},null,8,["color","colors"])]),be,(0,o._)("div",ye,[(0,o._)("div",Ce,[(0,o._)("button",{"aria-label":"Убрать один товар",type:"button",onClick:e[2]||(e[2]=(...e)=>t.decrement&&t.decrement(...e))},ke),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[3]||(e[3]=e=>t.productAmount=e),name:"count",type:"text"},null,512),[[a.nr,t.productAmount,void 0,{number:!0}]]),(0,o._)("button",{"aria-label":"Добавить один товар",type:"button",onClick:e[4]||(e[4]=(...e)=>t.increment&&t.increment(...e))},De)]),(0,o._)("button",{disabled:t.productInfo.productAddSending,class:"button button--primery",type:"submit"}," В корзину ",8,Pe),(0,o.wy)((0,o._)("div",null," Товар добавлен в корзину ",512),[[a.F8,t.productInfo.productAdded]]),(0,o.wy)((0,o._)("div",null," Добавляем товар в корзину... ",512),[[a.F8,t.productInfo.productAddSending]]),(0,o.wy)((0,o._)("div",null," Ошибка, не удалось добавить товар в корзину ",512),[[a.F8,t.productInfo.productAddedFailed]])])],32)])]),Ae])])):((0,o.wg)(),(0,o.iD)("div",Jt,[(0,o.Uk)(" Ошибка, не удалось загрузить товар "),(0,o._)("button",{onClick:e[0]||(e[0]=(0,a.iM)(((...e)=>t.loadProduct&&t.loadProduct(...e)),["prevent"]))},"Повторить ещё раз")]))}var Ue=(0,o.aZ)({setup(){const t=F(),e=(0,z.yj)();return{route:e,store:t}},data(){return{productInfo:{productAddedFailed:!1,productAddSending:!1,productAdded:!1},currentColor:0,productData:null,productAmount:1,loadProductTimer:0,productLoading:!1,productLoadingFailed:!1}},computed:{product(){return this.productData},category(){return this.productData?.category},currColors(){return this.productData?.colors},price(){return this.productData?.price}},name:"ProductPage",components:{BaseColors:st},methods:{...(0,b.nv)([v.ADD_PRODUCT_TO_CART]),loadProduct(){this.productLoading=!0,this.productLoadingFailed=!1,clearTimeout(this.loadProductTimer),this.loadProductTimer=setTimeout((()=>{P.ZP.get(`api/products/${this.route.params.id}`,{baseURL:A}).then((t=>this.productData=t.data)).catch((()=>this.productLoadingFailed=!0)).then((()=>this.productLoading=!1))}),0)},addToCart(){if(this.product){if(this.productAmount<1)return;this.productInfo.productAddedFailed=!1,this.productInfo.productAddSending=!0,this.productInfo.productAdded=!1,this[v.ADD_PRODUCT_TO_CART]({productId:this.product.id,amount:this.productAmount}).then((()=>this.productInfo.productAdded=!0)).catch((()=>this.productInfo.productAddedFailed=!0)).then((()=>this.productInfo.productAddSending=!1))}},increment(){this.productAmount++},decrement(){this.productAmount>1&&this.productAmount--}},watch:{"route.params.id":{handler(){this.loadProduct()},immediate:!0}}});const Ee=(0,C.Z)(Ue,[["render",we]]);var Re=Ee;const Oe={class:"content container"},Se={class:"content__top"},Fe={class:"breadcrumbs"},Le={class:"breadcrumbs__item"},Ie=(0,o._)("li",{class:"breadcrumbs__item"},[(0,o._)("a",{class:"breadcrumbs__link"}," Корзина ")],-1),Ze=(0,o._)("h1",{class:"content__title"},"Корзина",-1),ze={class:"content__info"},xe={key:0,class:"lds-dual-ring"},qe={key:1},Ve={key:2,class:"cart"},Ne={action:"#",class:"cart__form form",method:"POST"},Ke={class:"cart__field"},Me={class:"cart__list"},je={class:"cart__block"},We=(0,o._)("p",{class:"cart__desc"}," Мы посчитаем стоимость доставки на следующем этапе ",-1),Be={class:"cart__price"},Ye=(0,o._)("button",{class:"cart__button button button--primery",type:"submit"}," Оформить заказ ",-1);function $e(t,e,r,a,s,l){const i=(0,o.up)("router-link"),c=(0,o.up)("CartItem");return(0,o.wg)(),(0,o.iD)("main",Oe,[(0,o._)("div",Se,[(0,o._)("ul",Fe,[(0,o._)("li",Le,[(0,o.Wm)(i,{to:{name:"main"},class:"breadcrumbs__link"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Каталог ")])),_:1})]),Ie]),Ze,(0,o._)("span",ze,(0,_.zw)(t.totalCount)+" товара ",1)]),t.isLoading?((0,o.wg)(),(0,o.iD)("div",xe)):t.isLoadingFailed?((0,o.wg)(),(0,o.iD)("div",qe,"Ошибка, не удалось загрузить товары")):((0,o.wg)(),(0,o.iD)("section",Ve,[(0,o._)("form",Ne,[(0,o._)("div",Ke,[(0,o._)("ul",Me,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.products,(t=>((0,o.wg)(),(0,o.j4)(c,{key:t.productId,item:t},null,8,["item"])))),128))])]),(0,o._)("div",je,[We,(0,o._)("p",Be,[(0,o.Uk)(" Итого: "),(0,o._)("span",null,(0,_.zw)(t.numberFormat(t.totalPrice))+" ₽",1)]),t.totalCount>0?((0,o.wg)(),(0,o.j4)(i,{key:0,to:{name:"order"}},{default:(0,o.w5)((()=>[Ye])),_:1})):(0,o.kq)("",!0)])])]))])}const He={class:"cart__item product"},Ge={class:"product__pic"},Qe=["alt","src"],Xe={class:"product__title"},Je=(0,o._)("p",{class:"product__info"},[(0,o.Uk)("Объем: "),(0,o._)("span",null,"128GB")],-1),tr={class:"product__code"},er={class:"product__counter form__counter"},rr=(0,o._)("svg",{fill:"currentColor",height:"10",width:"10"},[(0,o._)("use",{"xlink:href":"#icon-minus"})],-1),ar=[rr],or=(0,o._)("svg",{fill:"currentColor",height:"10",width:"10"},[(0,o._)("use",{"xlink:href":"#icon-plus"})],-1),sr=[or],lr={class:"product__price"},ir=(0,o._)("svg",{fill:"currentColor",height:"20",width:"20"},[(0,o._)("use",{"xlink:href":"#icon-close"})],-1),cr=[ir];function nr(t,e,r,s,l,i){return(0,o.wg)(),(0,o.iD)("li",He,[(0,o._)("div",Ge,[(0,o._)("img",{alt:t.item.product.title,src:t.item.product.image.file.url,height:"120",width:"120"},null,8,Qe)]),(0,o._)("h3",Xe,(0,_.zw)(t.item.product.title),1),Je,(0,o._)("span",tr,(0,_.zw)(t.item.product.id),1),(0,o._)("div",er,[(0,o._)("button",{"aria-label":"Убрать один товар",type:"button",onClick:e[0]||(e[0]=(...e)=>t.decrement&&t.decrement(...e))},ar),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.amount=e),name:"count",type:"text"},null,512),[[a.nr,t.amount,void 0,{number:!0}]]),(0,o._)("button",{"aria-label":"Добавить один товар",type:"button",onClick:e[2]||(e[2]=(...e)=>t.increment&&t.increment(...e))},sr)]),(0,o._)("b",lr,(0,_.zw)(t.numberFormat(t.item.quantity*t.item.product.price))+" ₽ ",1),(0,o._)("button",{"aria-label":"Удалить товар из корзины",class:"product__del button-del",type:"button",onClick:e[3]||(e[3]=(0,a.iM)((e=>t.deleteProduct(t.item.id)),["prevent"]))},cr)])}var ur=(0,o.aZ)({setup(){const t=F();return{store:t}},props:{item:{type:Object,default:()=>({amount:0})}},name:"CartItem",computed:{amount:{get(){return this.item.quantity},set(t){this.store.dispatch(v.UPDATE_CART_PRODUCT_AMOUNT,{productId:this.item.id,amount:t})}}},methods:{...(0,b.nv)({deleteProduct:v.DELETE_CART_PRODUCT_AMOUNT}),increment(){this.item.quantity&&this.amount++},decrement(){this.item?.quantity&&this.item.quantity>1&&this.amount--},numberFormat(t){return lt(t)}}});const dr=(0,C.Z)(ur,[["render",nr]]);var _r=dr,pr=(0,o.aZ)({name:"CartPage",components:{CartItem:_r},computed:{...(0,b.Se)({products:"cartDetailProducts",totalPrice:"cartTotalPrice",totalCount:"cartTotalCount",isLoading:"isCartLoading",isLoadingFailed:"isCartLoadingFailed"})},methods:{numberFormat(t){return lt(t)}}});const mr=(0,C.Z)(pr,[["render",$e]]);var hr=mr;const gr={class:"content container"},fr={class:"content__top"},br={class:"breadcrumbs"},yr={class:"breadcrumbs__item"},Cr={class:"breadcrumbs__item"},Tr=(0,o._)("li",{class:"breadcrumbs__item"},[(0,o._)("span",{class:"breadcrumbs__link"}," Оформление заказа ")],-1),kr=(0,o._)("h1",{class:"content__title"},"Корзина",-1),vr={class:"content__info"},Dr={class:"cart"},Pr={class:"cart__field"},Ar={class:"cart__data"},wr=(0,o.uE)('<div class="cart__options"><h3 class="cart__title">Доставка</h3><ul class="cart__options options"><li class="options__item"><label class="options__label"><input checked="" class="options__radio sr-only" name="delivery" type="radio" value="0"><span class="options__value"> Самовывоз <b>бесплатно</b></span></label></li><li class="options__item"><label class="options__label"><input class="options__radio sr-only" name="delivery" type="radio" value="500"><span class="options__value"> Курьером <b>500 ₽</b></span></label></li></ul><h3 class="cart__title">Оплата</h3><ul class="cart__options options"><li class="options__item"><label class="options__label"><input class="options__radio sr-only" name="pay" type="radio" value="card"><span class="options__value"> Картой при получении </span></label></li><li class="options__item"><label class="options__label"><input class="options__radio sr-only" name="pay" type="radio" value="cash"><span class="options__value"> Наличными при получении </span></label></li></ul></div>',1),Ur={class:"cart__block"},Er={class:"cart__orders"},Rr={class:"cart__total"},Or=(0,o._)("p",null,[(0,o.Uk)("Доставка: "),(0,o._)("b",null,"500 ₽")],-1),Sr=["disabled"],Fr={key:0,class:"lds-dual-ring"},Lr={key:1},Ir={key:0,class:"cart__error form__error-block"},Zr=(0,o._)("h4",null,"Заявка не отправлена!",-1);function zr(t,e,r,s,l,i){const c=(0,o.up)("router-link"),n=(0,o.up)("BaseFormText"),u=(0,o.up)("BaseFormTextarea"),d=(0,o.up)("OrderItem");return(0,o.wg)(),(0,o.iD)("main",gr,[(0,o._)("div",fr,[(0,o._)("ul",br,[(0,o._)("li",yr,[(0,o.Wm)(c,{to:{name:"main"},class:"breadcrumbs__link"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Каталог ")])),_:1})]),(0,o._)("li",Cr,[(0,o.Wm)(c,{to:{name:"cart"},class:"breadcrumbs__link"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Корзина ")])),_:1})]),Tr]),kr,(0,o._)("span",vr,(0,_.zw)(t.count),1)]),(0,o._)("section",Dr,[(0,o._)("form",{action:"#",class:"cart__form form",method:"POST",onSubmit:e[5]||(e[5]=(0,a.iM)(((...e)=>t.order&&t.order(...e)),["prevent"]))},[(0,o._)("div",Pr,[(0,o._)("div",Ar,[(0,o.Wm)(n,{modelValue:t.formData.name,"onUpdate:modelValue":e[0]||(e[0]=e=>t.formData.name=e),error:t.formError.name,name:"name",placeholder:"Введите ваше полное имя",title:"ФИО"},null,8,["modelValue","error"]),(0,o.Wm)(n,{modelValue:t.formData.address,"onUpdate:modelValue":e[1]||(e[1]=e=>t.formData.address=e),error:t.formError.address,name:"address",placeholder:"Введите ваш адрес",title:"Адрес доставки"},null,8,["modelValue","error"]),(0,o.Wm)(n,{modelValue:t.formData.phone,"onUpdate:modelValue":e[2]||(e[2]=e=>t.formData.phone=e),error:t.formError.phone,name:"phone",placeholder:"Введите ваш телефон",title:"Телефон",type:"tel"},null,8,["modelValue","error"]),(0,o.Wm)(n,{modelValue:t.formData.email,"onUpdate:modelValue":e[3]||(e[3]=e=>t.formData.email=e),error:t.formError.email,name:"email",placeholder:"Введи ваш Email",title:"Email",type:"email"},null,8,["modelValue","error"]),(0,o.Wm)(u,{modelValue:t.formData.comment,"onUpdate:modelValue":e[4]||(e[4]=e=>t.formData.comment=e),error:t.formError.comment,name:"comment",placeholder:"Ваши пожелания",title:"Комментарий к заказу"},null,8,["modelValue","error"])]),wr]),(0,o._)("div",Ur,[(0,o._)("ul",Er,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.products,(t=>((0,o.wg)(),(0,o.j4)(d,{key:t.id,product:t},null,8,["product"])))),128))]),(0,o._)("div",Rr,[Or,(0,o._)("p",null,[(0,o.Uk)(" Итого: "),(0,o._)("b",null,(0,_.zw)(t.count),1),(0,o.Uk)(" товара на сумму "),(0,o._)("b",null,(0,_.zw)(t.numberFormat(t.price))+" ₽",1)])]),(0,o._)("button",{disabled:t.isLoading,class:"cart__button button button--primery",type:"submit"},[t.isLoading?((0,o.wg)(),(0,o.iD)("span",Fr)):((0,o.wg)(),(0,o.iD)("span",Lr," Оформить заказ "))],8,Sr)]),t.formErrorMessage?((0,o.wg)(),(0,o.iD)("div",Ir,[Zr,(0,o._)("p",null,(0,_.zw)(t.formErrorMessage),1)])):(0,o.kq)("",!0)],32)])])}r(7658);const xr={class:"cart__order"},qr=(0,o._)("br",null,null,-1);function Vr(t,e,r,a,s,l){const i=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("li",xr,[(0,o.Wm)(i,{to:{name:"product",params:{id:t.product.id}}},{default:(0,o.w5)((()=>[(0,o._)("h3",null,(0,_.zw)(t.product.product.title),1)])),_:1},8,["to"]),(0,o._)("b",null,(0,_.zw)(t.numberFormat(t.product.product.price*t.product.quantity))+" ₽",1),(0,o._)("span",null,"Количество: "+(0,_.zw)(t.product.quantity),1),qr,(0,o._)("span",null,"Артикул: "+(0,_.zw)(t.product.id),1)])}var Nr=(0,o.aZ)({props:{product:{type:Object}},name:"OrderItem",methods:{numberFormat(t){return lt(t)}}});const Kr=(0,C.Z)(Nr,[["render",Vr]]);var Mr=Kr,jr=r(2482);class Wr{constructor(){(0,jr.Z)(this,"name",void 0),(0,jr.Z)(this,"address",void 0),(0,jr.Z)(this,"phone",void 0),(0,jr.Z)(this,"email",void 0),(0,jr.Z)(this,"comment",void 0),this.name="",this.address="",this.phone="",this.email="",this.comment=""}}class Br{constructor(){(0,jr.Z)(this,"name",void 0),(0,jr.Z)(this,"address",void 0),(0,jr.Z)(this,"phone",void 0),(0,jr.Z)(this,"email",void 0),(0,jr.Z)(this,"comment",void 0),this.name="",this.address="",this.phone="",this.email="",this.comment=""}}const Yr=["name","placeholder"];function $r(t,e,r,s,l,i){const c=(0,o.up)("BaseFormField");return(0,o.wg)(),(0,o.j4)(c,{modelValue:t.dataValue,"onUpdate:modelValue":e[1]||(e[1]=e=>t.dataValue=e),error:t.error,title:t.title},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.dataValue=e),name:t.name,placeholder:t.placeholder,class:"form__input form__input--area"},null,8,Yr),[[a.nr,t.dataValue]])])),_:1},8,["modelValue","error","title"])}const Hr={class:"form__label"},Gr={class:"form__value"},Qr={key:0,class:"form__error"};function Xr(t,e,r,a,s,l){return(0,o.wg)(),(0,o.iD)("label",Hr,[(0,o.WI)(t.$slots,"default"),(0,o._)("span",Gr,(0,_.zw)(t.title),1),t.error?((0,o.wg)(),(0,o.iD)("span",Qr,(0,_.zw)(t.error),1)):(0,o.kq)("",!0)])}var Jr=(0,o.aZ)({props:{title:{type:String,required:!0},error:{type:String}},name:"BaseFormField"});const ta=(0,C.Z)(Jr,[["render",Xr]]);var ea=ta,ra=(0,o.aZ)({props:{title:{type:String,required:!0},error:{type:String,required:!0},placeholder:{type:String,required:!0},modelValue:{type:String,required:!0},name:{type:String,required:!0},type:{type:String,default:()=>"text"}},emits:["update:modelValue"],components:{BaseFormField:ea},computed:{dataValue:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}}}),aa=(0,o.aZ)({name:"BaseFormTextarea",mixins:[ra]});const oa=(0,C.Z)(aa,[["render",$r]]);var sa=oa;const la=["name","placeholder","type"];function ia(t,e,r,s,l,i){const c=(0,o.up)("BaseFormField");return(0,o.wg)(),(0,o.j4)(c,{error:t.error,title:t.title},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.dataValue=e),name:t.name,placeholder:t.placeholder,type:t.type,class:"form__input"},null,8,la),[[a.YZ,t.dataValue]])])),_:1},8,["error","title"])}var ca=(0,o.aZ)({name:"BaseFormText",mixins:[ra]});const na=(0,C.Z)(ca,[["render",ia]]);var ua=na,da=(0,o.aZ)({name:"OrderPage",components:{BaseFormText:ua,OrderItem:Mr,BaseFormTextarea:sa},data(){return{formData:new Wr,formError:new Br,formErrorMessage:"",isLoading:!1}},setup(){const t=F(),e=(0,o.Fl)((()=>t.getters.cartTotalPrice)),r=(0,o.Fl)((()=>t.getters.cartDetailProducts)),a=(0,o.Fl)((()=>t.getters.cartTotalCount));return{store:t,price:e,products:r,count:a}},methods:{numberFormat(t){return lt(t)},order(){this.isLoading=!0,this.formErrorMessage="",this.formError=new Br,P.ZP.post("api/orders",this.formData,{baseURL:A,params:{userAccessKey:this.$store.state.userAccessKey}}).then((t=>{this.$store.commit(k.RESET_CART),this.$store.commit(k.UPDATE_ORDER_INFO,t.data),this.$router.push({name:"orderInfo",params:{id:t.data.id}})})).catch((({response:t})=>{const e=t.data.error;this.formErrorMessage=e.message,400===t.status&&(this.formError=Object.assign(new Br,e.request||{}))})).then((()=>this.isLoading=!1))}}});const _a=(0,C.Z)(da,[["render",zr]]);var pa=_a;const ma={key:0,class:"lds-dual-ring"},ha={key:1},ga={key:2,class:"content container"},fa={class:"content__top"},ba={class:"breadcrumbs"},ya={class:"breadcrumbs__item"},Ca={class:"breadcrumbs__item"},Ta=(0,o._)("li",{class:"breadcrumbs__item"},[(0,o._)("a",{class:"breadcrumbs__link"}," Оформление заказа ")],-1),ka={class:"content__title"},va={class:"cart"},Da={action:"#",class:"cart__form form",method:"POST"},Pa={class:"cart__field"},Aa=(0,o._)("p",{class:"cart__message"}," Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ",-1),wa={class:"dictionary"},Ua={class:"dictionary__item"},Ea=(0,o._)("span",{class:"dictionary__key"}," Получатель ",-1),Ra={class:"dictionary__value"},Oa={class:"dictionary__item"},Sa=(0,o._)("span",{class:"dictionary__key"}," Адрес доставки ",-1),Fa={class:"dictionary__value"},La={class:"dictionary__item"},Ia=(0,o._)("span",{class:"dictionary__key"}," Телефон ",-1),Za={class:"dictionary__value"},za={class:"dictionary__item"},xa=(0,o._)("span",{class:"dictionary__key"}," Email ",-1),qa={class:"dictionary__value"},Va=(0,o._)("li",{class:"dictionary__item"},[(0,o._)("span",{class:"dictionary__key"}," Способ оплаты "),(0,o._)("span",{class:"dictionary__value"}," картой при получении ")],-1),Na={class:"cart__block"},Ka={class:"cart__orders"},Ma={class:"cart__total"},ja=(0,o._)("p",null,[(0,o.Uk)("Доставка: "),(0,o._)("b",null,"500 ₽")],-1),Wa=(0,o._)("b",null,"3",-1);function Ba(t,e,r,a,s,l){const i=(0,o.up)("router-link"),c=(0,o.up)("OrderItem");return t.productLoading?((0,o.wg)(),(0,o.iD)("div",ma)):t.order?((0,o.wg)(),(0,o.iD)("main",ga,[(0,o._)("div",fa,[(0,o._)("ul",ba,[(0,o._)("li",ya,[(0,o.Wm)(i,{to:{name:"main"},class:"breadcrumbs__link"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Каталог ")])),_:1})]),(0,o._)("li",Ca,[(0,o.Wm)(i,{to:{name:"cart"},class:"breadcrumbs__link"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Корзина ")])),_:1})]),Ta]),(0,o._)("h1",ka,[(0,o.Uk)(" Заказ оформлен "),(0,o._)("span",null,"№ "+(0,_.zw)(t.order.id),1)])]),(0,o._)("section",va,[(0,o._)("form",Da,[(0,o._)("div",Pa,[Aa,(0,o._)("ul",wa,[(0,o._)("li",Ua,[Ea,(0,o._)("span",Ra,(0,_.zw)(t.order.name),1)]),(0,o._)("li",Oa,[Sa,(0,o._)("span",Fa,(0,_.zw)(t.order.address),1)]),(0,o._)("li",La,[Ia,(0,o._)("span",Za,(0,_.zw)(t.order.phone),1)]),(0,o._)("li",za,[xa,(0,o._)("span",qa,(0,_.zw)(t.order.email),1)]),Va])]),(0,o._)("div",Na,[(0,o._)("ul",Ka,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.order.basket.items,(t=>((0,o.wg)(),(0,o.j4)(c,{key:t.id,product:t},null,8,["product"])))),128))]),(0,o._)("div",Ma,[ja,(0,o._)("p",null,[(0,o.Uk)(" Итого: "),Wa,(0,o.Uk)(" товара на сумму "),(0,o._)("b",null,(0,_.zw)(t.numberFormat(t.order.totalPrice))+" ₽",1)])])])])])])):((0,o.wg)(),(0,o.iD)("div",ha,"Ошибка, заказ не найден"))}var Ya=(0,o.aZ)({name:"OrderInfoPage",components:{OrderItem:Mr},data(){return{productLoading:!1}},methods:{numberFormat(t){return lt(t)}},computed:{order(){return this.$store.state.orderInfo}},created(){this.$store.state.orderInfo&&this.$store.state.orderInfo.id.toString()===this.$route.params.id||(this.productLoading=!0,this.$store.dispatch(v.LOAD_ORDER_INFO,this.$route.params.id).catch((()=>{})).then((()=>this.productLoading=!1)))}});const $a=(0,C.Z)(Ya,[["render",Ba]]);var Ha=$a;const Ga=[{name:"main",component:Yt,path:"/"},{name:"product",component:Re,path:"/product/:id"},{name:"cart",component:hr,path:"/cart"},{name:"order",component:pa,path:"/order"},{name:"orderInfo",component:Ha,path:"/order/:id"},{name:"notFound",component:Qt,path:"/:pathMatch(.*)*"}],Qa=(0,z.p7)({history:(0,z.r5)("/vue-app-1/"),routes:Ga});var Xa=Qa;(0,a.ri)(Z).use(S).use(Xa).mount("#app")}},e={};function r(a){var o=e[a];if(void 0!==o)return o.exports;var s=e[a]={exports:{}};return t[a](s,s.exports,r),s.exports}r.m=t,function(){var t=[];r.O=function(e,a,o,s){if(!a){var l=1/0;for(u=0;u<t.length;u++){a=t[u][0],o=t[u][1],s=t[u][2];for(var i=!0,c=0;c<a.length;c++)(!1&s||l>=s)&&Object.keys(r.O).every((function(t){return r.O[t](a[c])}))?a.splice(c--,1):(i=!1,s<l&&(l=s));if(i){t.splice(u--,1);var n=o();void 0!==n&&(e=n)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[a,o,s]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,a){var o,s,l=a[0],i=a[1],c=a[2],n=0;if(l.some((function(e){return 0!==t[e]}))){for(o in i)r.o(i,o)&&(r.m[o]=i[o]);if(c)var u=c(r)}for(e&&e(a);n<l.length;n++)s=l[n],r.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return r.O(u)},a=self["webpackChunk_1_project"]=self["webpackChunk_1_project"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(5315)}));a=r.O(a)})();
//# sourceMappingURL=app.6371388f.js.map